<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.75">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="KubeVela Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="KubeVela Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-5GLR1Y52M7"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-5GLR1Y52M7",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="KubeVela" href="/opensearch.xml"><title data-react-helmet="true">Working Mechanism | KubeVela</title><meta data-react-helmet="true" property="og:url" content="https://kubevela.io/docs/next/platform-engineers/workflow/working-mechanism"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Working Mechanism | KubeVela"><meta data-react-helmet="true" name="description" content="This document will give a brief introduction to the core mechanisms of KubeVela Workflow."><meta data-react-helmet="true" property="og:description" content="This document will give a brief introduction to the core mechanisms of KubeVela Workflow."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://kubevela.io/docs/next/platform-engineers/workflow/working-mechanism"><link data-react-helmet="true" rel="alternate" href="https://kubevela.io/docs/next/platform-engineers/workflow/working-mechanism" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://kubevela.io/zh/docs/next/platform-engineers/workflow/working-mechanism" hreflang="zh"><link data-react-helmet="true" rel="alternate" href="https://kubevela.io/docs/next/platform-engineers/workflow/working-mechanism" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.1f84ae86.css">
<link rel="preload" href="/assets/js/runtime~main.b8a84e57.js" as="script">
<link rel="preload" href="/assets/js/main.eb6d83a1.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="KubeVela" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logoDark.svg" alt="KubeVela" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">KubeVela</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Documentation</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/next/">Next</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/next/platform-engineers/workflow/working-mechanism">Next</a></li><li><a class="dropdown__link" href="/docs/">v1.2</a></li><li><a class="dropdown__link" href="/docs/v1.1/">v1.1</a></li><li><a class="dropdown__link" href="/docs/v1.0/">v1.0</a></li></ul></div><a href="https://kubevela.net" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Mirror</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__item navbar__link"><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>English</span></span></a><ul class="dropdown__menu"><li><a href="/docs/next/platform-engineers/workflow/working-mechanism" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">English</a></li><li><a href="/zh/docs/next/platform-engineers/workflow/working-mechanism" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">简体中文</a></li></ul></div><a href="https://github.com/oam-dev/kubevela" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="KubeVela" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logoDark.svg" alt="KubeVela" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">KubeVela</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a role="button" class="menu__link menu__link--sublist">Versions</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/docs/next/platform-engineers/workflow/working-mechanism">Next</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/">v1.2</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/v1.1/">v1.1</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/v1.0/">v1.0</a></li></ul></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Documentation</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">Blog</a></li><li class="menu__list-item"><a href="https://kubevela.net" target="_blank" rel="noopener noreferrer" class="menu__link">Mirror</a></li><li class="menu__list-item menu__list-item--collapsed"><a href="#" role="button" class="menu__link menu__link--sublist"><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>Languages</span></span></a><ul class="menu__list"><li class="menu__list-item"><a href="/docs/next/platform-engineers/workflow/working-mechanism" target="_self" rel="noopener noreferrer" class="menu__link dropdown__link--active" style="text-transform:capitalize">English</a></li><li class="menu__list-item"><a href="/zh/docs/next/platform-engineers/workflow/working-mechanism" target="_self" rel="noopener noreferrer" class="menu__link" style="text-transform:capitalize">简体中文</a></li></ul></li><li class="menu__list-item"><a href="https://github.com/oam-dev/kubevela" target="_blank" rel="noopener noreferrer" class="menu__link header-github-link"></a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/getting-started/core-concept">Core Concept</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/getting-started/architecture">Architecture</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/install">Installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/quick-start">Deploy First Application</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">Tutorials</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/tutorials/webservice">Deploy Container Image</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/tutorials/helm">Deploy Helm Chart</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/tutorials/consume-cloud-services">Deploy Cloud Service</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/tutorials/k8s-object">Deploy Kubernetes Objects</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/tutorials/jenkins">Working with Jenkins</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/tutorials/trigger">Continuous Delivery from Image Registry</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/case-studies/gitops">GitOps</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/tutorials/workflows">Manage Workflow</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">How-to Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">VelaUX</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Manage applications</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/how-to/dashboard/application/create-application">Create Application</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/how-to/dashboard/application/bind-new-environment">Bind Application with Environment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/how-to/dashboard/application/deploy-application">Deploy Application</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/how-to/dashboard/application/get-application-instance">Check Application State</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/tutorials/scaler">Modify Replicas</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/how-to/dashboard/application/get-application-log">View Application Logs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/how-to/dashboard/application/get-application-endpoint">Expose Application for Public Access</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/how-to/dashboard/application/view-application-resource">View Resources List Created</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/how-to/dashboard/application/get-application-revision">List Application Revision</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/how-to/dashboard/application/recycle-environment">Recycle Application Instance</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/how-to/dashboard/application/delete-application">Delete Application</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Manage workflows</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/how-to/dashboard/workflow/overview">Manage Workflows</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Manage traits</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/how-to/dashboard/trait/overview">Manage Traits</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Manage triggers</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/how-to/dashboard/trigger/overview">Integrate with CI system by Triggers</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Manage target</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/how-to/dashboard/target/overview">Manage Targets</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">CLI</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/quick-start-cli">Deploy First Application</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/traits/ingress">Gateway for Public Access</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Cloud Resources</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/components/cloud-services/provision-and-consume-cloud-services">Provision and Binding Cloud Resources</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/components/cloud-services/provision-and-initiate-database">Provision a Database and Import a SQL File for initialization</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/components/cloud-services/secure-your-database-connection">Secure your Database Connection</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/components/cloud-services/provision-an-RDS-instance-with-more-than-one-database">Provision an RDS instance with more than one database</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/traits/rollout">Rollout</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/policies/health">Health Check</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/case-studies/multi-cluster">Multi-Cluster App Delivery</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/workflow/component-dependency-parameter">Dependency and Data Passing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/workflow/webhook-notification">Notification</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/version-control">Revisioning</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/how-to/cli/addon/addon">Install Addon</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Extension</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Learning OAM</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/platform-engineers/oam/oam-model">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/platform-engineers/oam/x-definition">X-Definition</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Learning CUE</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/cue/basic">CUE Basic</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/cue/definition-edit">Manage X-Definition</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/cue/advanced">CUE Advanced</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Custom Addons</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/addon/intro">Customize Addon</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/addon/terraform">Extend a Terraform Addon</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/platform-engineers/components/custom-component">CUE Components</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Cloud Resources</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/addon/terraform">Extend a Terraform Addon</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/components/component-terraform">Extend Cloud Resources</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Traits System</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/traits/customize-trait">How-to</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/traits/patch-trait">Patch Traits</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/traits/status">Status Write Back</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/traits/advanced">Advanced Features</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Workflow System</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/platform-engineers/workflow/workflow">Designing Workflow Steps</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/platform-engineers/workflow/cue-actions">Step Operations</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/next/platform-engineers/workflow/working-mechanism">Working Mechanism</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">System Operation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/system-operation/bootstrap-parameters">Bootstrap Parameters</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/system-operation/managing-clusters">Managing Clusters</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/system-operation/observability">Observability</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/system-operation/performance-finetuning">Performance Fine-tuning</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/platform-engineers/system-operation/velaql">VelaQL</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/platform-engineers/debug/dry-run">Dry Run for Debugging</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/platform-engineers/x-def-version">Version Control for Definition</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">References</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/cli/vela">CLI Commands</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Built-in Addons</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/reference/addons/overview">Built-in Addons</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/reference/addons/velaux">VelaUX</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/reference/addons/terraform">Addon Cloud Resources</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/reference/addons/ai">Machine Learning Addon</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/components/cloud-services/cloud-resources-list">Supported Cloud Resource list</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Built-in Component Type</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/components/helm">Helm</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/components/cue/webservice">Web Service</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/components/cue/worker">Worker</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/components/cue/task">Task</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/components/kustomize">Kustomize</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/components/cue/raw">Kubernetes Objects</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/components/more">Needs More？</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Built-in Trait Type</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/traits/scaler">Setting replicas</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/traits/ingress">Gateway for Public Access</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/traits/storage">Storage</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/traits/rollout">Rollout</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/traits/annotations-and-labels">Labels and Annotations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/traits/service-binding">Service Binding</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/traits/sidecar">Attaching Sidecar</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/traits/autoscaler">AutoScaler</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/traits/kustomize-patch">Kustomize Patch</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/traits/more">Needs More？</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Built-in Policy Type</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/policies/envbinding">Multi-Environment</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/workflow/built-in-workflow-defs">Built-in Workflow Steps</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/end-user/service-account-integration">ServiceAccount Integration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/reference/ui-schema">UI-Schema</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/reference/user-improvement-plan">User Improvement Plan</a></li><li class="menu__list-item"><a href="https://kubevela.stoplight.io/docs/kubevela/b3A6NDI5NzQxMzM-detail-definition" target="_blank" rel="noopener noreferrer" class="menu__link menuLinkExternal_1OhN" tabindex="-1">VelaUX API Doc</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Roadmap</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/next/roadmap/README">KubeVela Roadmap</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/developers/references/devex/faq">FAQ</a></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for KubeVela <strong>Next</strong> version.</div><div class="margin-top--md">For up-to-date documentation, see the <strong><a href="/docs/">latest version</a></strong> (v1.2).</div></div><div class="docItemContainer_33ec"><article><div><span class="badge badge--secondary">Version: Next</span></div><header><h1 class="docTitle_3a4h">Working Mechanism</h1></header><div class="markdown"><p>This document will give a brief introduction to the core mechanisms of KubeVela Workflow.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="running-mode"></a>Running Mode<a class="hash-link" href="#running-mode" title="Direct link to heading">#</a></h2><p>The execution of workflow has two different running modes: <strong>DAG</strong> mode and <strong>StepByStep</strong> mode. In DAG mode, all steps in the workflow will execute concurrently. They will form a dependency graph for running according to the Input/Output in the step configuration automatically. If one workflow step has not met all its dependencies, it will wait for the conditions. In StepByStep mode, all steps will be executed in order. In KubeVela v1.2+, the defaut running mode is StepByStep. Currently, we do not support using DAG mode explicitly.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="suspend-and-retry"></a>Suspend and Retry<a class="hash-link" href="#suspend-and-retry" title="Direct link to heading">#</a></h2><p>Workflow will retry steps and suspend for different reasons.</p><ol><li>If step fails or waits for conditions, the workflow will retry after a backoff time. The backoff time will increase by the retry times.</li><li>If step fails too many times, the workflow will enter suspending state and stop retry.</li><li>If step is waiting for manual approval, the workflow will enter suspending state immediately. </li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="backoff-time"></a>Backoff Time<a class="hash-link" href="#backoff-time" title="Direct link to heading">#</a></h3><p>The backoff time for workflow to retry can be calculated by <code>int(0.05 * 2^(n-1))</code> where <code>n</code> is the number of retries. The minimal backoff time is 1 second，the first ten backoff time will be like:</p><table><thead><tr><th>Times</th><th>2^(n-1)</th><th>0.05*2^(n-1)</th><th>Requeue After(s)</th></tr></thead><tbody><tr><td>1</td><td>1</td><td>0.05</td><td>1</td></tr><tr><td>2</td><td>2</td><td>0.1</td><td>1</td></tr><tr><td>3</td><td>4</td><td>0.2</td><td>1</td></tr><tr><td>4</td><td>8</td><td>0.4</td><td>1</td></tr><tr><td>5</td><td>16</td><td>0.8</td><td>1</td></tr><tr><td>6</td><td>32</td><td>1.6</td><td>1</td></tr><tr><td>7</td><td>64</td><td>3.2</td><td>3</td></tr><tr><td>8</td><td>128</td><td>6.4</td><td>6</td></tr><tr><td>9</td><td>256</td><td>12.8</td><td>12</td></tr><tr><td>10</td><td>512</td><td>25.6</td><td>25</td></tr><tr><td>...</td><td>...</td><td>...</td><td>...</td></tr></tbody></table><p>If the workflow step is waiting, the max backoff time is 60s, you can change it by setting <code>--max-workflow-wait-backoff-time</code> in the <a href="/docs/next/platform-engineers/system-operation/bootstrap-parameters">bootstrap parameter</a> of KubeVela controller.</p><p>If the workflow step is failed, the max backoff time is 300s, you can change it by setting<code>--max-workflow-failed-backoff-time</code> in the <a href="/docs/next/platform-engineers/system-operation/bootstrap-parameters">bootstrap parameter</a> of KubeVela controller.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="maximum-retry-times"></a>Maximum Retry Times<a class="hash-link" href="#maximum-retry-times" title="Direct link to heading">#</a></h3><p>For failure case, the workflow will retry at most 10 times by default and enter suspending state after that. You can change the retry times by setting <code>--max-workflow-step-error-retry-times</code> in the <a href="/docs/next/platform-engineers/system-operation/bootstrap-parameters">bootstrap parameter</a> of KubeVela controller.</p><blockquote><p>Note that if the workflow step is unhealthy, the workflow step will be marked as wait but not failed and it will wait for healthy.</p></blockquote><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="avoid-configuration-drift"></a>Avoid Configuration Drift<a class="hash-link" href="#avoid-configuration-drift" title="Direct link to heading">#</a></h2><p>When workflow enters running state or suspends due to condition wait, KubeVela application will re-apply applied resources to prevent configuration drift routinely. This process is called <strong>State Keep</strong> in KubeVela. By default, the interval of State Keep is 5 minutes, which can be configured in the <a href="/docs/next/platform-engineers/system-operation/bootstrap-parameters">bootstrap parameter</a> of KubeVela controller by setting <code>--application-re-sync-period</code>. If you want to disable the state keep capability, you can also use the <a href="https://github.com/oam-dev/kubevela/blob/master/docs/examples/app-with-policy/apply-once-policy/apply-once.md" target="_blank" rel="noopener noreferrer">apply-once</a> policy in the application.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/oam-dev/kubevela.io/edit/main/docs/platform-engineers/workflow/working-mechanism.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated on <time datetime="2022-03-22T05:15:21.000Z" class="lastUpdatedDate_1WI_">3/22/2022</time> by <strong>Somefive</strong></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/next/platform-engineers/workflow/cue-actions"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Step Operations</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/next/platform-engineers/system-operation/bootstrap-parameters"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Bootstrap Parameters »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#running-mode" class="table-of-contents__link">Running Mode</a></li><li><a href="#suspend-and-retry" class="table-of-contents__link">Suspend and Retry</a><ul><li><a href="#backoff-time" class="table-of-contents__link">Backoff Time</a></li><li><a href="#maximum-retry-times" class="table-of-contents__link">Maximum Retry Times</a></li></ul></li><li><a href="#avoid-configuration-drift" class="table-of-contents__link">Avoid Configuration Drift</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Documentation</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/quick-start">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tutorials/webservice">Tutorials</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/platform-engineers/oam/oam-model">Extension</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://slack.cncf.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">CNCF Slack ( #kubevela channel )</a></li><li class="footer__item"><a href="https://gitter.im/oam-dev/community" target="_blank" rel="noopener noreferrer" class="footer__link-item">Gitter</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/next/platform-engineers/workflow/">DingTalk (23310022)</a></li><li class="footer__item"><div class="wechat"> <a class="wechat-label">Wechat Group(Scan code to request joining)</a> <a class="wechat-img" rel="noreferrer noopener" aria-label="Wechat Group"><img src="https://static.kubevela.net/images/barnett-wechat.jpg" alt="Broker wechat to add you into the user group."></a></div></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/oam-dev/kubevela" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">
        <br>
        <strong>© KubeVela Authors 2022 | Documentation Distributed under <a href="https://creativecommons.org/licenses/by/4.0">CC-BY-4.0</a> </strong> <strong>| Powered by <a href="https://www.netlify.com">Netlify</a></strong>
        <br>
        <br>
        © 2022 The Linux Foundation. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our <a href="https://www.linuxfoundation.org/trademark-usage/"> Trademark Usage</a> page. <a href="https://beian.miit.gov.cn/" target="_blank">浙ICP备12022327号</a>
      </div></div></div></footer></div>
<script src="/assets/js/runtime~main.b8a84e57.js"></script>
<script src="/assets/js/main.eb6d83a1.js"></script>
</body>
</html>